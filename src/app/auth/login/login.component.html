<div class="container mt-2 w-50">
  <form (ngSubmit)="onLogin()" #loginForm="ngForm">
    <div class="form-group">
      <input
        type="text"
        class="form-control mb-2"
        [class.is-invalid]="
          username.invalid && (username.dirty || username.touched)
        "
        id="username"
        name="username"
        placeholder="Username"
        required
        minlength="3"
        maxlength="20"
        [(ngModel)]="user.username"
        #username="ngModel"
      />
      @if (username.invalid && (username.dirty || username.touched)) {
        <div class="invalid-feedback">
          @if (username.errors?.["required"]) {
            <div>Username is required.</div>
          }
          @if (username.errors?.["minlength"]) {
            <div>Username must be at least 3 characters long.</div>
          }
          @if (username.errors?.["maxlength"]) {
            <div>Username must not exceed 20 characters.</div>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <input
        type="password"
        class="form-control"
        [class.is-invalid]="
          password.invalid && (password.dirty || password.touched)
        "
        id="password"
        name="password"
        placeholder="Password"
        required
        minlength="4"
        [(ngModel)]="user.password"
        #password="ngModel"
      />
      @if (password.invalid && (password.dirty || password.touched)) {
        <div class="invalid-feedback">
          @if (password.errors?.["required"]) {
            <div>Password is required.</div>
          }
          @if (password.errors?.["minlength"]) {
            <div>Password must be at least 4 characters long.</div>
          }
        </div>
      }
    </div>

    <button
      class="btn btn-primary my-2"
      type="submit"
      [disabled]="!loginForm.valid"
    >
      Login
    </button>
    @if (message) {
      <div class="alert alert-danger">{{ message }}</div>
    }
    <div class="register">
      <a routerLink="/register" class="text-decoration-none"
        >Don't have an account yet? Register!</a
      >
    </div>
  </form>
</div>
